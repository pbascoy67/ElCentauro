<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Mapa Lotes El Centauro</title>
    <!-- Google Fonts: Roboto -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --color-fondo: #B3E5FC; /* Color celeste pastel */
            --color-primario: #4A90E2;
            --color-secundario: #50E3C2;
            --color-texto: #333333;
            --color-boton: #4A90E2;
            --color-boton-hover: #357ABD;
            --color-boton-actualizar: #FF5722;
            --color-boton-actualizar-hover: #E64A19;
            --color-boton-editar: #4CAF50;
            --color-boton-editar-hover: #388E3C;
            --color-lote-propietario: #A5D6A7; /* Verde suave */
            --color-lote-alquilada: #FFF59D; /* Amarillo suave */
            --color-lote-en-proceso: #FFCC80; /* Naranja suave */
            --color-lote-en-venta: #F44336; /* Rojo */
            --color-lote-en-alquiler: #2196F3; /* Azul */
            --color-lote-ambas: #9C27B0; /* Morado */
            --color-leyenda-fondo: #ffffff;
            --color-borde: #dddddd;
            --color-lote-seleccionado: #FFD700; /* Oro para resaltar lote seleccionado */
        }

        /* Estilos CSS */
        body {
            font-family: 'Roboto', Arial, sans-serif;
            background-color: var(--color-fondo);
            margin: 0;
            padding: 20px;
            overflow-x: hidden;
            color: var(--color-texto);
        }

        h1, h3 {
            color: var(--color-texto);
            text-align: center;
        }

        .main-container {
            display: flex;
            flex-direction: row;
            justify-content: flex-start;
            align-items: flex-start;
            gap: 20px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
            max-width: 300px;
            width: 100%;
        }

        .leyenda, .actualizar-datos {
            padding: 15px;
            background-color: var(--color-leyenda-fondo);
            border: 1px solid var(--color-borde);
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .leyenda h3, .actualizar-datos h3 {
            margin-top: 0;
            font-weight: 500;
            text-align: center;
        }

        .leyenda-item {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }

        .leyenda-color, .leyenda-border {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            border: 1px solid #000;
            border-radius: 4px;
        }

        .leyenda-color {
            background-color: #fff;
        }

        .border-en-venta {
            border: 2px dashed var(--color-lote-en-venta);
        }

        .border-en-alquiler {
            border: 2px dashed var(--color-lote-en-alquiler);
        }

        .border-ambas {
            border: 2px dashed var(--color-lote-ambas);
        }

        .actualizar-datos button {
            width: 100%;
            padding: 10px;
            margin-top: 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            transition: background-color 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            color: #ffffff;
        }

        .btn-actualizar {
            background-color: var(--color-boton-actualizar);
        }

        .btn-actualizar:hover {
            background-color: var(--color-boton-actualizar-hover);
        }

        .btn-editar {
            background-color: var(--color-boton-editar);
        }

        .btn-editar:hover {
            background-color: var(--color-boton-editar-hover);
        }

        .button-save {
            margin-top: 10px;
            background-color: var(--color-boton);
            color: #ffffff;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            transition: background-color 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
        }

        .button-save:hover {
            background-color: var(--color-boton-hover);
        }

        .mapa-container {
            overflow-x: auto;
            white-space: nowrap;
            background-color: var(--color-leyenda-fondo);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            flex: 1 1 600px;
        }

        .mapa {
            display: flex;
            align-items: flex-start;
            justify-content: center;
            flex-wrap: wrap;
        }

        .calle {
            display: grid;
            grid-template-columns: auto auto auto;
            justify-items: center;
            margin: 0.5cm;
            position: relative;
        }

        .calle-label {
            writing-mode: horizontal-tb;
            text-orientation: upright;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: 500;
            font-size: 16px;
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--color-leyenda-fondo);
            padding: 2px 5px;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .lado {
            display: flex;
            flex-direction: column;
        }

        .lado-izquierdo {
            justify-content: flex-end;
        }

        .lote {
            width: 70px;
            height: 50px;
            border: 1px solid var(--color-borde);
            background-color: #ffffff;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 8px;
            cursor: pointer;
            position: relative;
            border-radius: 4px;
            transition: transform 0.2s, box-shadow 0.2s, border 0.2s;
            user-select: none;
        }

        .lote:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .lote-seleccionado {
            border: 2px solid var(--color-lote-seleccionado);
        }

        .lote-input {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: transparent;
            border: none;
            text-align: center;
            width: 60px;
            font-weight: 500;
        }

        input[type="text"], 
        input[type="date"], 
        select {
            width: 100%;
            padding: 8px;
            box-sizing: border-box;
            border: 1px solid var(--color-borde);
            border-radius: 4px;
            font-family: 'Roboto', Arial, sans-serif;
        }

        .espacio-extra {
            height: 50px;
        }

        /* Estilos para estados y asterisco */
        .estado-propietario {
            background-color: var(--color-lote-propietario);
            color: #ffffff;
        }

        .estado-alquilada {
            background-color: var(--color-lote-alquilada);
            color: #000000;
        }

        .estado-en-proceso {
            background-color: var(--color-lote-en-proceso);
            color: #ffffff;
        }

        .estado-en-venta {
            border: 2px dashed var(--color-lote-en-venta);
        }

        .estado-en-alquiler {
            border: 2px dashed var(--color-lote-en-alquiler);
        }

        .estado-ambas {
            border: 2px dashed var(--color-lote-ambas);
        }

        .asterisco {
            color: red;
            font-weight: bold;
            position: absolute;
            top: 2px;
            right: 2px;
            font-size: 14px;
            pointer-events: none;
        }

        /* Estilos para formulario emergente */
        #formularioLote {
            display: none;
            position: fixed;
            top: 10%;
            left: 50%;
            transform: translateX(-50%);
            background-color: #ffffff;
            padding: 20px;
            border: 1px solid var(--color-borde);
            border-radius: 8px;
            z-index: 1000;
            width: 30%;
            max-width: 90%;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        #formularioLote h3 {
            margin-top: 0;
            font-weight: 500;
            text-align: center;
        }

        #formularioLote label {
            display: block;
            margin-top: 10px;
            font-weight: 500;
        }

        #formularioLote input, 
        #formularioLote select {
            border: 1px solid var(--color-borde);
            border-radius: 4px;
            padding: 8px;
            font-family: 'Roboto', Arial, sans-serif;
        }

        #formularioLote button {
            margin-top: 15px;
            padding: 8px 12px;
            margin-right: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Roboto', Arial, sans-serif;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .calle {
                margin: 0.3cm;
            }
        }

        @media (max-width: 768px) {
            .main-container {
                flex-direction: column;
                align-items: center;
            }

            .sidebar {
                max-width: 100%;
            }

            .leyenda, .actualizar-datos {
                padding: 10px;
                max-width: 100%;
            }

            .mapa-container {
                padding: 10px;
                flex: 1 1 100%;
            }

            .lote {
                width: 60px;
                height: 45px;
                margin-bottom: 6px;
            }

            #formularioLote {
                width: 90%;
                left: 5%;
                top: 5%;
            }

            .button-save {
                width: 100%;
                padding: 12px 0;
            }

            .calle-label {
                font-size: 14px;
            }
        }

        @media (max-width: 480px) {
            .lote {
                width: 50px;
                height: 40px;
            }

            .calle {
                margin: 0.2cm;
            }

            .leyenda-item {
                flex-direction: column;
                align-items: flex-start;
            }

            .leyenda-color, .leyenda-border {
                margin-bottom: 5px;
            }
        }
    </style>
</head>
<body>

<h1>Mapa Lotes El Centauro</h1>

<div class="main-container">
    <!-- Sidebar con Leyenda y Actualizar Datos de Lotes -->
    <div class="sidebar">
        <!-- Sección de leyenda -->
        <div class="leyenda">
            <h3>Descripción de Estados</h3>
            <div class="leyenda-item">
                <div class="leyenda-color estado-propietario"></div>
                <span>Propietario</span>
            </div>
            <div class="leyenda-item">
                <div class="leyenda-color estado-alquilada"></div>
                <span>Alquilada</span>
            </div>
            <div class="leyenda-item">
                <div class="leyenda-color estado-en-proceso"></div>
                <span>En Proceso</span>
            </div>
            <div class="leyenda-item">
                <div class="leyenda-border border-en-venta"></div>
                <span>En venta</span>
            </div>
            <div class="leyenda-item">
                <div class="leyenda-border border-en-alquiler"></div>
                <span>En alquiler</span>
            </div>
            <div class="leyenda-item">
                <div class="leyenda-border border-ambas"></div>
                <span>Ambas</span>
            </div>
        </div>

        <!-- Sección Actualizar Datos de Lotes -->
        <div class="actualizar-datos">
            <h3>Actualizar Datos de Lotes</h3>
            <label for="selectCalleEstado">Calle:</label>
            <select id="selectCalleEstado" onchange="actualizarOpcionesLotesEstado()">
                <!-- Opciones de calles generadas dinámicamente -->
            </select>
            <label for="selectLoteEstado">Lote:</label>
            <select id="selectLoteEstado">
                <!-- Opciones de lotes generadas dinámicamente -->
            </select>
            <label for="selectEstado">Estado:</label>
            <select id="selectEstado">
                <!-- Solo tres opciones: Propietario, Alquilada y En Proceso -->
                <option value="propietario">Propietario</option>
                <option value="alquilada">Alquilada</option>
                <option value="en-proceso">En Proceso</option>
            </select>
            <button onclick="actualizarEstadoLote()" class="btn-actualizar">
                <i class="fas fa-sync-alt"></i> Actualizar Lote
            </button>
            <button onclick="mostrarFormularioDesdeEstado()" class="btn-editar">
                <i class="fas fa-edit"></i> Editar Lote
            </button>
            <!-- Botón Guardar Configuración movido aquí -->
            <button class="button-save btn btn-primary" onclick="guardarConfiguracion()">
                <i class="fas fa-save me-2"></i>Guardar Configuración
            </button>
        </div>
    </div>

    <!-- Contenedor del mapa -->
    <div class="mapa-container">
        <div class="mapa" id="mapaLotes">
            <!-- Calles y lotes se generarán dinámicamente -->
        </div>
    </div>
</div>

<script>
    function generarConfiguracionInicial() {
        const numeroCalles = prompt("¿Cuántas calles deseas crear?");
        const mapaLotes = document.getElementById("mapaLotes");
        mapaLotes.innerHTML = '';

        for (let i = 1; i <= numeroCalles; i++) {
            const numeroLotesIzquierdo = prompt(`¿Cuántos lotes quieres en el lado izquierdo de la Calle ${i}?`);
            const numeroLotesDerecho = prompt(`¿Cuántos lotes quieres en el lado derecho de la Calle ${i}?`);

            const calle = document.createElement("div");
            calle.className = "calle";

            const ladoIzquierdo = document.createElement("div");
            ladoIzquierdo.className = "lado lado-izquierdo";
            ladoIzquierdo.id = `ladoIzquierdo${i}`;

            for (let j = 1; j <= numeroLotesIzquierdo; j++) {
                const lote = crearLote(`Calle ${i} - Lado Izquierdo - Lote ${j}`);
                ladoIzquierdo.appendChild(lote);
            }

            const ladoDerecho = document.createElement("div");
            ladoDerecho.className = "lado";
            ladoDerecho.id = `ladoDerecho${i}`;

            for (let k = 1; k <= numeroLotesDerecho; k++) {
                const lote = crearLote(`Calle ${i} - Lado Derecho - Lote ${k}`);
                ladoDerecho.appendChild(lote);
            }

            const calleLabel = document.createElement("div");
            calleLabel.className = "calle-label";
            calleLabel.innerText = `Calle ${i}`;

            calle.appendChild(ladoIzquierdo);
            calle.appendChild(calleLabel);
            calle.appendChild(ladoDerecho);

            mapaLotes.appendChild(calle);
        }
    }

    function crearLote(nombre) {
        const lote = document.createElement("div");
        lote.className = "lote";

        const inputLote = document.createElement("input");
        inputLote.type = "text";
        inputLote.value = nombre;
        inputLote.className = "lote-input";
        inputLote.onchange = (e) => {
            lote.id = e.target.value;
        };

        lote.appendChild(inputLote);
        return lote;
    }

    window.onload = function() {
        generarConfiguracionInicial();
    };
</script>

</body>
</html>
